# Roblox: クライアント-サーバー間の通信方法①(Client-Serverモデル)

今回はRobloxでクライアント側のLocalScriptとサーバー側のScriptで情報をやり取りする際の方法についてご紹介していこうと思います！

このテーマは導入から説明すると長くなるので、今回含め全3回に分けて書いていきます。

全3回のアウトラインは以下のようになります。

1. Client-Serverモデル: そもそものRobloxにおけるクライアントとサーバー間のルール
2. RemoteEvent: クライアントとサーバー間の一方向の通信について
3. RemoteFunction: クライアントとサーバー間の双方向の通信方法について

今回の記事は総じてドキュメントがとても理解しやすいので、この内容を元にまとめていこうと思います。

https://create.roblox.com/docs/scripting/events/remote

## Robloxの原則：Client-Serverモデル

まず前提として、**Robloxでは基本的にサーバーとクライアントが分離されて互いに直接アクセスできないClient-Serverモデル**[^1]が採用されており、サーバー側にゲームの状態を管理する最終権限を持たせています。

[^1]: https://create.roblox.com/docs/projects/client-server

また、ゲームの一貫性を保つためにも基本的にサーバーとクライアントを分離して、それぞれの場所で処理を独立して実行させるようになっています。

### Client-Serverモデルのメリット

これの互いに分離させるモデルのメリットは以下です。

- **不正防止**: クライアントが直接サーバーデータにアクセスできると、チートやハッキングが容易になってしまいます。
- **データ保護**: プレイヤーの個人情報や重要なゲームデータをサーバー側で保護できます。
- **同期の確保**: サーバーが全クライアントの状態を管理し、必要な情報のみを各クライアントに送信することで、ゲーム全体の同期を維持します。

## クライアントとサーバーの通信を実現させる手段

しかしゲーム開発において、クライアントとサーバー間で通信が必要になるケースは多々あります。

- プレイヤーのレベルアップの管理
- プレイヤーのアイテム使用情報の管理
- プレイヤーのキー入力操作の受信

などなど。

Robloxではこういった通信が必要な際だけ通信可能にする機能が用意されています。今回はその中でもよく使われる`RemoteEvent`と`RemoteFuncion`についてご紹介していきます。

### `RemoteEvent`と`RemoteFunction`の特徴

それぞれの特徴は以下です。

- [`RemoteEvent`](https://create.roblox.com/docs/reference/engine/classes/RemoteEvent): サーバーとクライアントの一方向の通信に使用され、非同期で実行される
- [`RemoteFunction`](https://create.roblox.com/docs/reference/engine/classes/RemoteFunction): サーバーとクライアントの双方向の通信に使用され、送信側は応答を待機する。

ここでの重要な違いは、`RemoteEvent`は**送信して終わり**なのに対して、`RemoteFunction`は**相手側のレスポンスを待つ**という点です。

次回からはこの違いを踏まえてそれぞれの使い方を見ていこうと思います。

## まとめ

今回は、実際にクライアントとサーバー間の通信方法を紹介するにあたって必要となる、RobloxのClient-Serverモデルについて紹介しました。

次の記事では実際に`RemoteEvent`の解説と、シチュエーションごとのサンプルコードを紹介します！